---
import SwaggerUI from 'swagger-ui-react';
import "swagger-ui-react/swagger-ui.css";
import { apis } from "../config/apis";

interface Props {
    apiName: string;
}

const { apiName } = Astro.props;

// API base URL from environment variable
const API_BASE_URL = import.meta.env.PUBLIC_SWAGGER_API_URL || '';

// Find the API by name (case insensitive)
const currentApi = apis.find(
    (api) => api.name.toLowerCase() === (apiName?.toLowerCase() || "")
);
---
{!currentApi ? (
    <div class="flex justify-center items-center h-full text-gray-500 dark:text-zinc-400 text-lg bg-gray-50 dark:bg-zinc-900">
        API not found
    </div>
) : (
    <div class="absolute inset-0">
        <SwaggerUI url={`${API_BASE_URL}?url=${encodeURIComponent(currentApi.url)}`} docExpansion="none" displayRequestDuration  deepLinking client:load />
    </div>
)}

<style>
    .loading {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        font-size: 1.25rem;
        color: #6b7280;
    }
</style> 